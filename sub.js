!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JA=t.EN=t.ZH=t.DEFAULT_LANG=t.CY_TOKEN=void 0;t.ZH="zh";t.EN="en";t.JA="ja-JP";t.DEFAULT_LANG="en";t.CY_TOKEN="ejlj3pmk56ss057lt4l4"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showCyxyIcon=function(){$(".cyxy-function").show()},t.hideCyxyIcon=function(){$(".cyxy-personal").hide(),$(".cyxy-function").hide(),$(".cyxy-favorite").hide(),$(".cyxy-video-trans").hide()}},function(e,t,n){var i;/*! layer mobile-v2.0 弹层组件移动版 License LGPL http://layer.layui.com/mobile By 贤心 */!function(r){"use strict";var o=document,l="getElementsByClassName",s=function(e){return o.querySelectorAll(e)},a={type:0,shade:!0,shadeClose:!0,fixed:!0,anim:"scale"},c={extend:function(e){var t=JSON.parse(JSON.stringify(a));for(var n in e)t[n]=e[n];return t},timer:{},end:{},touch:function(e,t){e.addEventListener("click",function(e){t.call(this,e)},!1)}},d=0,u=["layui-m-layer"],g=function(e){this.config=c.extend(e),this.view()};g.prototype.view=function(){var e=this,t=e.config,n=o.createElement("div");e.id=n.id=u[0]+d,n.setAttribute("class",u[0]+" "+u[0]+(t.type||0)),n.setAttribute("index",d);var i=function(){var e="object"==typeof t.title;return t.title?'<h3 style="'+(e?t.title[1]:"")+'">'+(e?t.title[0]:t.title)+"</h3>":""}(),r=function(){"string"==typeof t.btn&&(t.btn=[t.btn]);var e,n=(t.btn||[]).length;return 0!==n&&t.btn?(e='<span yes type="1">'+t.btn[0]+"</span>",2===n&&(e='<span no type="0">'+t.btn[1]+"</span>"+e),'<div class="layui-m-layerbtn">'+e+"</div>"):""}();if(t.fixed||(t.top=t.hasOwnProperty("top")?t.top:100,t.style=t.style||"",t.style+=" top:"+(o.body.scrollTop+t.top)+"px"),2===t.type&&(t.content='<i></i><i class="layui-m-layerload"></i><i></i><p>'+(t.content||"")+"</p>"),t.skin&&(t.anim="up"),"msg"===t.skin&&(t.shade=!1),n.innerHTML=(t.shade?"<div "+("string"==typeof t.shade?'style="'+t.shade+'"':"")+' class="layui-m-layershade"></div>':"")+'<div class="layui-m-layermain" '+(t.fixed?"":'style="position:static;"')+'><div class="layui-m-layersection"><div class="layui-m-layerchild '+(t.skin?"layui-m-layer-"+t.skin+" ":"")+(t.className?t.className:"")+" "+(t.anim?"layui-m-anim-"+t.anim:"")+'" '+(t.style?'style="'+t.style+'"':"")+">"+i+'<div class="layui-m-layercont">'+t.content+"</div>"+r+"</div></div></div>",!t.type||2===t.type){var a=o[l](u[0]+t.type);a.length>=1&&layer.close(a[0].getAttribute("index"))}document.body.appendChild(n);var c=e.elem=s("#"+e.id)[0];t.success&&t.success(c),e.index=d++,e.action(t,c)},g.prototype.action=function(e,t){var n=this;e.time&&(c.timer[n.index]=setTimeout(function(){layer.close(n.index)},1e3*e.time));var i=function(){0==this.getAttribute("type")?(e.no&&e.no(),layer.close(n.index)):e.yes?e.yes(n.index):layer.close(n.index)};if(e.btn)for(var r=t[l]("layui-m-layerbtn")[0].children,o=r.length,s=0;o>s;s++)c.touch(r[s],i);if(e.shade&&e.shadeClose){var a=t[l]("layui-m-layershade")[0];c.touch(a,function(){layer.close(n.index,e.end)})}e.end&&(c.end[n.index]=e.end)},r.layer={v:"2.0",index:d,open:function(e){return new g(e||{}).index},close:function(e){var t=s("#"+u[0]+e)[0];t&&(t.innerHTML="",o.body.removeChild(t),clearTimeout(c.timer[e]),delete c.timer[e],"function"==typeof c.end[e]&&c.end[e](),delete c.end[e])},closeAll:function(){for(var e=o[l](u[0]),t=0,n=e.length;n>t;t++)layer.close(0|e[0].getAttribute("index"))}},void 0===(i=function(){return layer}.call(t,n,t,e))||(e.exports=i)}(window)},,,,,,function(e,t,n){"use strict";var i=n(1),r=n(9),o=n(0),l=(n(12),n(2)),s=document.createElement("div"),a=.25;s.id="substr";var c=document.createElement("div");c.style.cssText="\n    margin-top: 12px;\n    width: 100%;\n";var d=document.createElement("img");d.id="logo",d.src=chrome.extension.getURL("images/logo.png"),d.style.cssText="\n    width: 21px !important;\n    height: 21px !important;\n    border-radius: 50%;\n    float: left;\n    min-width: unset !important;\n",c.appendChild(d);var u=document.createElement("a");u.id="cy_link",u.classList.add("menu_ele"),u.style.cssText="\n    font-family: PingFangSC-Regular;\n    font-size: 14px;\n    float: left;\n    margin-left: 10px;\n    color: white;\n",u.innerHTML=chrome.i18n.getMessage("appNameAbbr"),c.appendChild(u);var g=document.createElement("div");g.id="vh_div",g.classList.add("menu_ele"),g.style.cssText="\n    margin: 10px;\n    display: inline;\n    margin-top: 4px !important;\n";var p=document.createElement("hr");p.style.cssText="\n    border: none;\n    border-left: 2px solid #FFFFFF;\n    height: 13px;\n    width: 2px;\n    color: #FFFFFF;\n    float: left;\n    margin-left: 14px;\n    margin-top: 4px;\n    display: inline;\n    margin-bottom:-10px;\n",g.appendChild(p),c.appendChild(g);var f=document.createElement("div");f.id="lang_menu",f.style.cssText="\n    margin-left: -5px;\n    display: inline;\n";var m=document.createElement("div");m.id="lang_radio",m.style.display="inline",document.head.appendChild(document.createElement("style")).innerHTML="\n    .lang_radio {\n        display: none;\n    }\n    .lang_radio_img {\n        vertical-align: unset !important;\n        width: 13px !important;\n        height: 13px !important;\n        margin-top: 0px !important;\n        cursor: pointer;\n        margin-right: 3px !important;\n        margin-top: 4px !important;\n        display: inline;\n        min-height: unset !important;\n        min-width: unset !important;\n    }\n";var h=chrome.extension.getURL("images/grey_radio.png"),y=chrome.extension.getURL("images/green_radio.png");function b(e,t,n){var i=document.createElement("input");i.id=`${e}_radio`,i.type="radio",i.name="lang",i.value=e,i.classList.add("lang_radio"),t&&(i.checked="true"),m.appendChild(i);let r=document.createElement("img");r.classList.add("menu_ele"),r.classList.add("lang_radio_img"),r.id=`${e}_radio_img`,r.style.filter="brightness(0) invert(1)",r.src=h,r.addEventListener("click",function(e){let t=document.getElementsByClassName("lang_radio_img");for(let e of t)e.style.filter="brightness(0) invert(1)",e.src=h;r.style.filter="none",r.src=y,i.checked=!0,function(){if(!G||G.currentTime>0&&!G.ended&&G.readyState>2){K=$("input[name='lang']:checked")[0].value;let e=document.getElementById("toggle_btn");chrome.runtime.sendMessage({type:"recopen",lang:K},function(e){xe(chrome.i18n.getMessage("requestingAudioMsg"))}),e.innerHTML=chrome.i18n.getMessage("stopVideoTransBtn"),G&&G.paused&&G.play()}}()}),m.appendChild(r);let o=document.createElement("label");o.for=i.id,o.id=`${e}_label`,o.classList.add("menu_ele"),o.innerHTML=` ${n}`,o.style.cssText="\n        font-family: PingFangSC-Regular;\n        font-size: 14px;\n        color: #FFFFFF;\n        text-align: right;\n        maigin-left: 12px;\n        margin-right: 12px\n    ",m.appendChild(o)}var v=chrome.i18n.getMessage("transZh2En"),w=chrome.i18n.getMessage("transEn2Zh"),x=chrome.i18n.getMessage("transJp2Zh"),_=chrome.i18n.getMessage("transZh2EnAbbr"),E=chrome.i18n.getMessage("transEn2ZhAbbr"),T=chrome.i18n.getMessage("transJp2ZhAbbr"),M=chrome.i18n.getMessage("showOrg"),k=chrome.i18n.getMessage("showTgt"),L=chrome.i18n.getMessage("showBil"),S=chrome.i18n.getMessage("showOrgAbbr"),C=chrome.i18n.getMessage("showTgtAbbr"),F=chrome.i18n.getMessage("showBilAbbr"),H=885;window.innerWidth<H?(b(o.ZH,!1,_),b(o.EN,!1,E),b(o.JA,!1,T)):(b(o.ZH,!1,v),b(o.EN,!1,w),b(o.JA,!1,x)),f.appendChild(m);var A=document.createElement("button");A.classList.add("Btn"),A.classList.add("menu_ele"),A.id="toggle_btn",A.innerHTML=chrome.i18n.getMessage("startVideoTransBtn"),A.style.cssText="\n    background-color: rgba(0, 0, 0, 0);\n    color: #FFFFFF;\n    border: 1px solid #FFFFFF;\n    border-radius: 3px;\n    display: inline-block;\n    height: 1.6rem !important;\n    margin-left: 4px;\n    padding: 0rem 0.3rem !important;\n    font-size: 0.8rem;\n    cursor: pointer;\n",f.appendChild(A);var N=A.cloneNode(!0);N.classList="menu_ele",N.style.marginLeft="12px",N.id="switch_track_btn",window.innerWidth<H?N.innerHTML=F:N.innerHTML=L,N.value="bilingual",N.addEventListener("click",function(){let e=document.getElementById(N.id);if("bilingual"==e.value){let t=M;window.innerWidth<H&&(t=S),e.innerHTML=t,e.value="original"}else if("original"==e.value){let t=k;window.innerWidth<H&&(t=C),e.innerHTML=t,e.value="target"}else{let t=L;window.innerWidth<H&&(t=F),e.innerHTML=t,e.value="bilingual"}let t=e.value;chrome.runtime.sendMessage({type:"switchTrack",newTrack:t})}),N.onclick=function(){!function(){let e=document.getElementById(N.id),t=document.getElementsByClassName("reclogOrg")[0],n=document.getElementsByClassName("reclogTgt")[0];"bilingual"==e.value?(t.style.display="block",n.style.display="block"):"original"==e.value?(t.style.display="block",n.style.display="none"):(t.style.display="none",n.style.display="block")}()},f.appendChild(N),c.appendChild(f);var I=document.createElement("button"),B="&#9776;",O="◃";I.style.cssText="\n    color: white;\n    display: inline;\n    margin-right: -3px;\n    background-color: rgba(0, 0, 0, 0);\n    color: #FFFFFF;\n    border: none;\n    height: 2rem;\n    margin-left: 4px;\n    margin-top: -4px;\n    padding: 4px;\n    cursor: pointer;\n    box-shadow: none;\n",I.innerHTML=O,I.id="rwd_btn",I.title=chrome.i18n.getMessage("hideRwdBtn"),c.appendChild(I),s.appendChild(c);var W=document.createElement("div"),j="2",z=480,Z=30;window.innerHTML<480&&(j="1.5",Z=20),W.style.cssText=`\n    font-size: ${j}rem;\n    display: block;\n    line-height: 34px;\n`;var J=W.cloneNode(!0);W.classList.add("reclogOrg"),W.innerHTML=chrome.i18n.getMessage("clickToStartTrans");var P=document.createElement("div");P.classList.add("reclog"),P.append(W),J.classList.add("reclogTgt"),P.append(J),s.appendChild(P),s.title=chrome.i18n.getMessage("minimizeTransTip");var q="90",D=`\n    position: fixed;\n    left: ${.025*window.innerWidth}px;\n    top: '';\n    bottom: 10px;\n    height: 11rem;\n    width: ${q}%;\n    padding-left: 20px;\n    padding-right: 20px;\n    cursor: grab;\n    z-index: 300000;;\n    background: rgba(0, 0, 0, 0.8);\n    color: white;\n    transform: scale(1);\n`,R="\n    position: fixed;\n    width: 800px;\n    height: 250px;\n    left: '';\n    top: '';\n    right: -300px;\n    bottom: -80px;\n    cursor: pointer;\n    padding-left: 20px;\n    padding-right: 20px;\n    cursor: grab;\n    zIndex: 300000;;\n    background: rgba(0, 0, 0, 0.8);\n    color: white;\n    border: 10px solid white;\n";function U(){let e=document.querySelectorAll(".menu_ele"),t=document.getElementById("rwd_btn");t.innerHTML=B,t.style.height="29px",t.title=chrome.i18n.getMessage("showRwdBtn");for(let t of e)t.style.display="none"}function V(){let e=document.querySelectorAll(".menu_ele"),t=document.getElementById("rwd_btn");t.innerHTML=O,t.style.height="24px",t.title=chrome.i18n.getMessage("hideRwdBtn");for(let t of e)t.style.display="inline";window.innerWidth<H&&$("#cy_link")[0].style&&($("#cy_link")[0].style.display="none")}s.style.cssText=D,s.classList.add("cyxy-trs-target"),s.addEventListener("dblclick",Oe);var X=null,Y=null,G=document.querySelector("video:not(#rewardvideo)"),K=o.EN,Q=o.ZH,ee=!1;function te(){$("input[name='lang']:checked")[0]&&(ee?Ie():Be())}function ne(){return chrome.runtime.sendMessage({type:"recclose"}),document.getElementById("toggle_btn").innerHTML=chrome.i18n.getMessage("startVideoTransBtn"),ee=!1,xe(chrome.i18n.getMessage("closingAudioMsg")),(0,r.initialize_process)(),!0}var ie=!1;chrome.runtime.onMessage.addListener(function(e,t,n){if("showSubtitle"==e.type)ie=e.showLangMenu,i=e.lang,G?Ne(i):Se<Ce?(l.open({content:He,skin:"msg",time:5}),window.setTimeout(Ae(i),200)):(l.open({content:Fe,skin:"msg",time:5}),Ne(i),Se=0),n({type:"showSubtitle",status:"accept"});else if("closeSubtitle"==e.type)je();else if("reset"==e.type)ee=!1,toggle_btn.innerHTML=chrome.i18n.getMessage("startVideoTransBtn"),xe(chrome.i18n.getMessage("closingAudioMsg"));else if("show_msg"==e.type)xe(e.msg_str);else if("is_logout"==e.type)je();else if(e.type=e.subtitle)if(K==o.JA){let t=(0,r.process_ja_result)(e.subtitle,Z);if("ok"==t.status)xe(t.text),Ee(t.trans);else{let e=document.querySelector(".reclogOrg");e&&""==e.innerHTML&&xe(chrome.i18n.getMessage("openRecorder"))}}else if(K==o.EN){let t=(0,r.process_en_result)(e.subtitle,Z);if("ok"==t.status)xe(t.text),Ee(t.trans);else{let e=document.querySelector(".reclogOrg");e&&""==e.innerHTML&&xe(chrome.i18n.getMessage("openRecorder"))}}else if(K=o.ZH){let t=(0,r.process_zh_result)(e.subtitle,Z);if("ok"==t.status)xe(t.text),Ee(t.trans);else{let e=document.querySelector(".reclogOrg");e&&""==e.innerHTML&&xe(chrome.i18n.getMessage("openRecorder"))}}var i});var re="",oe="",le=null,se=null,ae=5e3,ce=[],de=[],ue=null,ge=null,pe=-1,fe=-1;var me=null;function he(){ce=[],de=[],ue=null,ge=null,pe=-1,fe=-1,me=window.setInterval(function(){[ue,pe]=be("org",ue,pe,function(e){Te(e,re,le,K,".reclogOrg")}),[ge,fe]=be("tgt",ge,fe,function(e){Te(e,oe,se,Q,".reclogTgt")})},200)}function ye(){me&&window.clearTimeout(me)}function be(e,t,n,i){let r=[];("org"==e?ce:de).forEach(e=>{r.push(e)});let o=r.length;if(0==o)return[t,n];if(-1==n)return i(r[n=0]),[t,n];if(1==o&&0==n)return[t,n];{let l=ae/o;t||(t=new Date);let s=new Date-t,a=s/l,c=r[n].length/Z;if(!((a=a-Math.floor(a)>c+.2?Math.ceil(a):Math.floor(a))>n))return[t,n];if((n+=1)>o-1){let r=ve(e,o);r?(n=0,i(r)):n=-1,t=new Date}else if(s>ae){let o=r[n];ve(e,n),n=0,i(o),t=new Date}else i(r[n]);return[t,n]}}function ve(e,t){let n=[];return"org"==e?(ce.splice(0,t),n=ce):(de.splice(0,t),n=de),n[0]}var we="";function xe(e){0!=e.length&&we!=e&&(ce.push(e),we=e)}var _e="";function Ee(e){0!=e.length&&_e!=e&&(de.push(e),_e=e)}function Te(e,t,n,i,r){if(e==t)return;t=e;let o=document.querySelector(r);if(o&&(o.innerHTML=e,".reclogOrg"==r?X=Me(X,o):Y=Me(Y,o)),!document.fullscreenElement)return;if(!G||G!=document.fullscreenElement)return;let l=G.currentTime,s=l+5;"showing"==n.mode&&t&&function(e,t,n,i){let r=se;i==K&&(r=le);if(r.activeCues)for(let e of r.activeCues)r.removeCue(e);let o=new VTTCue(e,t,n);i==K?"showing"!=se.mode?o.line=12:o.line=10:o.line=12;r.addCue(o)}(l,s,t,i)}function Me(e,t){return e&&window.clearTimeout(e),e=window.setTimeout(()=>{t&&(t.innerHTML="")},2e4)}var ke=$(".reclog").clientWidth;window.onresize=function(){if(document.fullscreenElement)Z=.45*window.innerWidth/(parseFloat(getComputedStyle(document.documentElement).fontSize)*j),function(){if(!G)return;let e=document.getElementById(N.id);"original"==e.value?(le.mode="showing",se.mode="hidden"):"target"==e.value?(se.mode="showing",le.mode="hidden"):(se.mode="showing",le.mode="showing");Le=le.mode,$e=se.mode,G.textTracks.onchange=function(){"showing"==le.mode&&le.mode!=Le&&"showing"==$e&&"showing"!=se.mode&&(se.mode="showing"),"showing"==se.mode&&se.mode!=$e&&"showing"==Le&&"showing"!=le.mode&&(le.mode="showing"),Le=le.mode,$e=se.mode}}(),(0,i.hideCyxyIcon)();else{!function(){if(!G||!G.textTracks)return;let e=document.getElementById(N.id);if(e){if("showing"==le.mode&&"showing"!=se.mode){let t=M;window.innerWidth<H&&(t=S),e.innerHTML=t,e.value="original"}else if("showing"!=le.mode&&"showing"==se.mode){let t=k;window.innerWidth<H&&(t=C),e.innerHTML=t,e.value="target"}else{let t=L;window.innerWidth<H&&(t=F),e.innerHTML=t,e.value="bilingual"}for(let e of G.textTracks)e.mode="disabled"}}(),(0,i.showCyxyIcon)();let t=$(".reclog");if(t[0]&&(t=t[0]),t&&e&&"scale(1)"==e.style.transform){Z=t.clientWidth/(parseFloat(getComputedStyle(document.documentElement).fontSize)*j),j=t.clientWidth/ke*j,ke=t.clientWidth,j>"2"?j="2":j<"1.5"&&(j="1.5"),t.style.fontSize=`${j}rem`;let e=`#${o.ZH}_label`,n=`#${o.EN}_label`,i=`#${o.JA}_label`,r=$(e),l=$(n),s=$(i);if($(e)[0]&&(r=$(e)[0],l=$(n)[0],s=$(i)[0]),window.innerWidth<H){r.innerHTML=` ${_}`,l.innerHTML=` ${E}`,s.innerHTML=` ${T}`,$("#cy_link")[0].style&&($("#cy_link")[0].style.display="none");}else r.innerHTML=` ${v}`,l.innerHTML=` ${w}`,s.innerHTML=` ${x}`}}};var Le="disable",$e="disable";_=chrome.i18n.getMessage("transZh2EnAbbr"),E=chrome.i18n.getMessage("transEn2ZhAbbr"),T=chrome.i18n.getMessage("transJp2ZhAbbr");var Se=0,Ce=0,Fe=chrome.i18n.getMessage("videoNotFound"),He=chrome.i18n.getMessage("searchingVideo");function Ae(e){(G=document.querySelector("video:not(#rewardvideo)"))||Se>=Ce?(G&&(G[0]&&(G=G[0]),Ne(e)),window.clearTimeout(Ae)):Se+=1}function Ne(e){$("#habitlab_video_overlay").length>0&&$("#habitlab_video_overlay").remove(),je(),document.body.appendChild(s),ee=!1,$(`input[value=${e}]`)[0].checked="true",$(`#${e}_radio_img`).click(),function(){}(),document.getElementById("toggle_btn").addEventListener("click",te),function(){let e=document.getElementById("rwd_btn"),t=document.getElementById("toggle_btn");e.addEventListener("click",e=>{"none"!=t.style.display?U():V()})}();let t=$(".reclog");t[0]&&(t=t[0]),z=t.clientWidth,ke=t.clientWidth,!z&&t&&(z=window.innerHTML*q),Z=z/(parseFloat(getComputedStyle(document.documentElement).fontSize)*j),G?(!function(e){let t=o.ZH;e==o.ZH?t=o.EN:e==o.JA&&(e="ja");let n=chrome.i18n.getMessage("appNameAbbr");if(!le){let t=M;window.innerWidth<H&&(t=S);let i=`${t}(${n})`;le=G.addTextTrack("subtitles",i,e)}if(!se){let e=k;window.innerWidth<H&&(e=C);let i=`${e}(${n})`;se=G.addTextTrack("subtitles",i,t)}}(e),G.addEventListener("pause",e=>{Ie(),ye()}),G.addEventListener("play",e=>{Be(),he()}),G.addEventListener("ended",e=>{ze()}),G.addEventListener("volumechange",e=>{G.muted&&l.open({content:videoAlertMuted,skin:"msg",time:5})}),G.paused&&G.play()):(Ze(300),Ie()),$(".cyxy-video-trans")[0].style.filter="none",he()}function Ie(){ne(),V()}function Be(){!function(){K=$("input[name='lang']:checked")[0].value;let e=document.getElementById("toggle_btn");chrome.runtime.sendMessage({type:"recopen",lang:K},function(e){xe(chrome.i18n.getMessage("requestingAudioMsg"))}),ee=!0,e.innerHTML=chrome.i18n.getMessage("stopVideoTransBtn")}(),ie?ie=!1:U()}function Oe(){let e=document.getElementById(s.id);if(e){let t=1,n=0,i=setInterval(function(){t<=.3?(clearInterval(i),e.style.cssText=R,e.style.transform=`scale(${a})`,e.title=chrome.i18n.getMessage("maximizeTransTip"),e.removeEventListener("dblclick",Oe),e.addEventListener("dblclick",We)):(t=(n+=5)>=100?.3:t-n/100,e.style.transform=`scale(${t})`,e.offsetLeft+n<=window.innerWidth&&(e.style.left=10*n+"px"))},30)}}function We(){let e=document.getElementById(s.id);if(e.style.border="",e){let t=0,n=0,i=setInterval(function(){1==t?(clearInterval(i),e.title=chrome.i18n.getMessage("minimizeTransTip"),e.style.cssText=D,e.style.top="",e.removeEventListener("dblclick",We),e.addEventListener("dblclick",Oe)):(t=(n+=5)>=100?1:n/100,e.style.transform=`scale(${t})`,e.offsetLeft+n<=window.innerWidth&&(e.style.left-=5*n+"px"))},5)}}function je(){let e=document.getElementById(s.id);if(e){Promise.resolve(ne()).then(t=>{e.remove(),$(".cyxy-video-trans")[0].style.filter="grayscale(100%)",G&&(G.removeEventListener(ze),G.removeEventListener(Ie),G.removeEventListener(Be)),ye()})}}function ze(){Ze(300),je()}function Ze(e){for(var t=(new Date).getTime();(new Date).getTime()<t+e;);}function Je(e){chrome.runtime.sendMessage({type:"clickCyxyBtn",btnName:e})}document.querySelector(".cyxy-personal").addEventListener("click",Je("personal")),document.querySelector(".cyxy-function").addEventListener("click",Je("function")),document.querySelector(".cyxy-favorite").addEventListener("click",Je("favorite"))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.process_en_result=function(e,t){let n=e.target[0],d=n.text.replace(c,""),u=n.trans.replace(c,"");if(!n.is_final){if(n.stability<.5)return{status:"failed"};if(d.length<30)return{status:"failed"}}let g=Date.now(),p=(0,i.chopSentenceEN)(d,s,o,t);g=Date.now();let f=(0,i.chopSentenceZH)(u,a,l,t);return o=(0,r.string_filter_en)(d),l=(0,r.string_filter_zh)(u),s=p,a=f,{text:p,trans:f,status:"ok"}},t.process_zh_result=function(e,t){let n=e.target[0],d=n.text.replace(c,""),u=n.trans.replace(c,"");if(!n.is_final&&n.stability<.2)return{status:"failed"};if("。"==d||"."==u)return{status:"failed"};let g=Date.now(),p=(0,i.chopSentenceZH)(d,s,o,t);g=Date.now();let f=(0,i.chopSentenceEN)(u,a,l,t);return o=(0,r.string_filter_zh)(d),l=(0,r.string_filter_en)(u),s=p,a=f,{text:p,trans:f,status:"ok"}},t.process_ja_result=function(e,t){let n=e.target[0],r=n.text.replace(c,""),d=n.trans.replace(c,"");if(!n.is_final&&n.stability<.6)return{status:"failed"};let u=Date.now(),g=(0,i.chopSentenceJA)(r,s,o,t);u=Date.now();let p=(0,i.chopSentenceZH)(d,a,l,t);return o=r,l=d,s=g,a=p,{text:g,trans:p,status:"ok"}},t.initialize_process=function(){o="",l="",s="",a=""};var i=n(10),r=n(11),o="",l="",s="",a="",c=/^\s+|\s+$/g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chopSentenceZH=function(e,t,n,l){let s=i.ZH;return l=.9*parseFloat(l),f(s,l,{punc:o,startWords:c,whiteSpace:r},e,t,n)},t.chopSentenceJA=function(e,t,n,o){let l=i.JA;return o=.9*parseFloat(o),f(l,o,{punc:a,pauseWords:d,endWords:u,whiteSpace:r},e,t,n)},t.chopSentenceEN=function(e,t,n,o){return f(i.EN,o*=2,{punc:l,startWords:g,whiteSpace:r},e,t,n)};var i=n(0);let r=/\s+/g,o=/[，。？！]/g,l=/[.,?!](\s|$)/g,s="、",a=/[。、？]/g,c=/(就像|假设|如果|假如|尽管|即使|一旦|但是)/g,d=/(のは|例えば|しかし|そして|けれども|ところが|けども|けど|だが|から(?![\d|は]))/g,u=/(なければならないんだ[ろうな|ろう|よ|か|が|ね]|なければならないんだ|でしょう|ましょう|ありません[よ|か|が|ね]|ありません|あります[よ|か|が|ね]|あります|できます[よ|か|が|ね]|できます|なりません[よ|か|が|ね]|なりません|なります[よ|か|が|ね]|なります|ます[よ|か|が|ね]|ます|ません[よ|か|が|ね]|ません|です[ね|が]|ですか(?!ら)|です(?!から)|でした[ね|か|が]|でした|だけで|ました[ら|ろうな|ろう|よ|か|が|ね]|ました)(?!(けれども|けども|けど|だが)、)/g,g=/\b(what|when|why|where|who|how|that|if|but|and)(\s|$)/gi,p="startWords";function f(e,t,n,r,o,l){let s=r,a=y(n.punc,s);if(a[0]&&0==a[0].index&&(s=s.substring(a[0].length,s.length)),r==l)return o;e==i.JA&&(l=m(l,n),s=m(s,n));let c=s,d=l;if(e==i.EN&&(c=s.toLowerCase())==(d=l.toLowerCase()))return o;if(""==l)return function(e,t,n,r){e==i.JA&&(r={punc:r.punc});for(var o in r)if((t=b(t,n,r,o)).length<=n)break;t.length>n&&(t=t.substring(0,n));return t}(e,s,t,n);let u=0;if(s.length>l.length&&d==c.substring(0,l.length)){let r=s.indexOf(o);return s=h(e,s=s.substring(r,s.length),t,n,c),e==i.EN?w(s,o):s}a=y(n.punc,s);let g=0;for(let e=u;e<s.length;e++){if(!l[e]||l[e]!=s[e]){g=e;break}if(g>0){let e=0;for(let t=a.length-1;t>0;t--)a[t].index<g&&(u=(e=a[t].index)+a[t][0].length)}}return(s=s.substring(u,s.length)).length>t&&(s=h(e,s,t,n,c)),e==i.EN?w(s,o):s}function m(e,t){return e=function(e,t,n){let i=y(e,n),r="",o=0,l=0;for(let e=0;e<i.length;e++)l=i[e].index+i[e][0].length,r=n.substring(o,l)+t,o=l;return r+=n.substring(o)}(t.pauseWords,s,e),e=function(e,t){let n=y(e,t),i=0,r="",o=0;for(let e=0;e<n.length;e++)o=n[e].index+n[e][0].length,"か"==t[o-1]?r+=t.substring(i,o)+"？":r+=t.substring(i,o)+"。",i=o;o<t.length-1&&(t=r+t.substring(o,t.length));return t}(t.endWords,e)}function h(e,t,n,r,o){for(var l in e==i.JA&&(r={punc:r.punc}),r)if((t=v(e,t,n,r,l,o)).length<=n)break;return t.length>n&&(t=t.substring(0,n)),t}function y(e,t){let n=[];for(let i of t.matchAll(e))n.push(i);return n}function b(e,t,n,i){let o=y(n[i],e),l=e.length;if(e.length>t){for(let e=o.length-1;e>=0;e--){let n=o[e].index+o[e][0].length;if(i==p&&(n=o[e].index)-1>=0&&r.test(o[n])&&(n-=1),n<t){l=n;break}}return e.substring(0,l)}return e}function v(e,t,n,r,o,l){let s=y(r[o],t),a=0;if(t.length>n){if(e==i.EN){let e=t.toLowerCase();for(let i=0;i<s.length;i++){let r=s[i].index+s[i][0].length;if(r!=t.length&&(o==p&&(r=s[i].index),r>t.length-n)){if(a=r,i<s.length-1){let t=s[i+1].index;l.indexOf(e.substring(a,t))>0&&(a=o!=p?t+s[i+1][0].length:t)}break}}}else for(let e=0;e<s.length;e++){let i=s[e].index+s[e][0].length;if(i!=t.length&&(o==p&&(i=s[e].index),a=i,i>t.length-n))break}return t.substring(a,t.length)}return t}function w(e,t){if(!e||!t)return e;let n=e[0],i=t[0];return n.toLowerCase()==i.toLowerCase()&&i[0]&&i[0]==i[0].toUpperCase()?e[0].toUpperCase()+e.slice(1):e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.string_filter_zh=function(e){return o(e,i)},t.string_filter_en=function(e){return o(e,r)};var i=[[/^[，|,|。|.|？]/,""],[/尿|屎|阴茎|阴道|妓|婊|我操|鸡鸡/g,function(e){for(var t=e.length,n=0,i="";n<t;)n++,i+="*";return i}],[/诚信|陈星|陈鑫/g,"晨兴"],[/小鄙视/g,"小米是"]],r=[[/^[，|,|。|.|?]/,""],[/\b(fuck|penis|fucking)\b/gi,function(e){for(var t=e.length,n=0,i="";n<t;)n++,i+="*";return i}]];function o(e,t){var n=e;return t.forEach(function(e){var t=e[0],i=e[1];n=n.replace(t,i)}),n}},function(e,t,n){var i;!function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function o(e){return function(e,t){var n,i,l,s,a,c,d,u,g,p=1,f=e.length,m="";for(i=0;i<f;i++)if("string"==typeof e[i])m+=e[i];else if(Array.isArray(e[i])){if((s=e[i])[2])for(n=t[p],l=0;l<s[2].length;l++){if(!n.hasOwnProperty(s[2][l]))throw new Error(o('[sprintf] property "%s" does not exist',s[2][l]));n=n[s[2][l]]}else n=s[1]?t[s[1]]:t[p++];if(r.not_type.test(s[8])&&r.not_primitive.test(s[8])&&n instanceof Function&&(n=n()),r.numeric_arg.test(s[8])&&"number"!=typeof n&&isNaN(n))throw new TypeError(o("[sprintf] expecting number but found %T",n));switch(r.number.test(s[8])&&(u=n>=0),s[8]){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s[6]?parseInt(s[6]):0);break;case"e":n=s[7]?parseFloat(n).toExponential(s[7]):parseFloat(n).toExponential();break;case"f":n=s[7]?parseFloat(n).toFixed(s[7]):parseFloat(n);break;case"g":n=s[7]?String(Number(n.toPrecision(s[7]))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s[7]?n.substring(0,s[7]):n;break;case"t":n=String(!!n),n=s[7]?n.substring(0,s[7]):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s[7]?n.substring(0,s[7]):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s[7]?n.substring(0,s[7]):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}r.json.test(s[8])?m+=n:(!r.number.test(s[8])||u&&!s[3]?g="":(g=u?"+":"-",n=n.toString().replace(r.sign,"")),c=s[4]?"0"===s[4]?"0":s[4].charAt(1):" ",d=s[6]-(g+n).length,a=s[6]&&d>0?c.repeat(d):"",m+=s[5]?g+n+a:"0"===c?g+a+n:a+g+n)}return m}(function(e){if(s[e])return s[e];var t,n=e,i=[],o=0;for(;n;){if(null!==(t=r.text.exec(n)))i.push(t[0]);else if(null!==(t=r.modulo.exec(n)))i.push("%");else{if(null===(t=r.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var l=[],a=t[2],c=[];if(null===(c=r.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(l.push(c[1]);""!==(a=a.substring(c[0].length));)if(null!==(c=r.key_access.exec(a)))l.push(c[1]);else{if(null===(c=r.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");l.push(c[1])}t[2]=l}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push(t)}n=n.substring(t[0].length)}return s[e]=i}(e),arguments)}function l(e,t){return o.apply(null,[e].concat(t||[]))}var s=Object.create(null);t.sprintf=o,t.vsprintf=l,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=l,void 0===(i=function(){return{sprintf:o,vsprintf:l}}.call(t,n,t,e))||(e.exports=i))}()}]);